<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CashFlow Next</title>
    <meta name="description" content="Modernized CashFlowJS rebuilt with Vite + TypeScript" />
    <script>
      (() => {
        const params = new URLSearchParams(window.location.search);
        const ui = params.get('ui');
        const wantsNext = ui === 'next';
        if (!wantsNext) {
          if (ui === 'legacy') {
            params.delete('ui');
          }
          const legacyUrl = new URL('./legacy/index.html', window.location.href);
          legacyUrl.search = params.toString() ? `?${params.toString()}` : '';
          window.location.replace(legacyUrl.toString());
        }
      })();
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="legacy-optin" style="position: fixed; top: 12px; right: 12px; z-index: 10; font-size: 14px;">
      <a href="?ui=legacy" style="color: #1f2937; background: #f3f4f6; padding: 6px 10px; border-radius: 8px; text-decoration: none; box-shadow: 0 1px 3px rgba(0,0,0,0.12);">
        返回旧版界面
      </a>
    </div>
    <div id="app"></div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
